@using Sattelite.EntityFramework.ViewModels.Admin.User
@using Sattelite.EntityFramework.ViewModels.Admin.Project
@model ProjectMemberViewModel
@{
    ViewBag.Title = "Додати учасника до проекту ?";
    Layout = null;
    var allUsers = TempData["AllUsers"]?.Cast<User>().ToList<UserViewModel>();//TempData.AllUsers;
    var allProjectRoles = TempData["AllProjectRoles"]?.Cast<ProjectRole>().ToList<ProjectMemberRoleViewModel>(); //Enum.GetNames(typeof(Sattelite.DefaultProjectMemberRoles)); //TODO: to be added\changed from DB
}

@using (Html.BeginForm("AddProjectMemberConfirm", "Project",
    new { area = "Admin", controller = "Project", @projectId = Model.ProjectId, @projectMemberId = Model.ProjectMemberId },
    FormMethod.Post, new { enctype = "multipart/form-data" }))
{

    @Html.Partial("_SucceedMessage")
    @Html.Partial("_ErrorMessage")

    @Html.ValidationSummary(true)

    <div class="modal-header bg-info">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true"></button>
        <h3 id="AreaMember" class="modal-title panel-title">Please, select a new meber of project and assign project role ! </h3>
    </div>
    <div class="modal-content">
        <div class="form-group">

            <label class="control-label col-md-3 col-sm-3">Project role: </label>
            @Html.DropDownListFor(model => model.User.Id, new SelectList(allUsers, "Id", "Name", Model.PojectUser.Id), new { Class = "form-control col-md-6 col-sm-6" })
        </div>
        <div class="form-group">

            <label class="control-label col-md-3 col-sm-3">Project role: </label>
            @Html.DropDownListFor(model => model.ProjectRole.Id, new SelectList(allProjectRoles, "Id", "Name", Model.ProjectRole.Id), new { Class = "form-control col-md-6 col-sm-6" })
        </div>
    </div>
    @*@if (ViewBag.Error != null)
        {
               <label class="label-danger" >@ViewBag.Error</label>
        }*@
    <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal"> Cancel </button>
        <button type="submit" class="btn btn-success col-md-offset-2"> Add </button>
    </div>
}